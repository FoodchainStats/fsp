[{"path":"https://foodchainstats.github.io/fsp/articles/fsp.html","id":"what-this-is-supposed-to-be","dir":"Articles","previous_headings":"","what":"What this is supposed to be","title":"Getting started with fsp","text":"idea collate set functions instructions updating pocketbook [usethis::use_article()] make guidance item publication.","code":""},{"path":"https://foodchainstats.github.io/fsp/articles/jobs03.html","id":"workflow","dir":"Articles","previous_headings":"","what":"Workflow","title":"Agri-food chain employment","text":"first step acquire raw data. Since agricultural workforce data annual, JOBS03 data quarterly, latest year may include figures agriculture. Lets get yearly averages, calculate percentage changes case come useful.","code":"lvls <- c(\"Agriculture\",           \"Fishing\",           \"Manufacturing\",           \"Wholesale\",           \"Retail\",           \"Catering\")  ag_gb <- fsp::compile_ag_workforce() #> Joining with `by = join_by(date)`  food <- fsp::jobs03_sectors() |>    dplyr::left_join(fsp::get_jobs03_data()) |>    dplyr::group_by(sector, date) |>    dplyr::summarise(value = sum(value)) |>    dplyr::bind_rows(ag_gb) |>    dplyr::mutate(sector = forcats::fct(sector, levels = lvls)) #> Reading JOBS03 #>  ■■■■■■■                           20% |  ETA: 13s #>  ■■■■■■■■■■■■■                     40% |  ETA:  9s #>  ■■■■■■■■■■■■■■■■■■■               60% |  ETA:  6s #>  ■■■■■■■■■■■■■■■■■■■■■■■■■         80% |  ETA:  3s #>  ■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■  100% |  ETA:  0s #> Joining with `by = join_by(sic_division)``summarise()` has grouped output by 'sector'. You can override using the `.groups` argument.  food |>    dplyr::arrange(desc(date)) |>    head() |>    knitr::kable() food |>   dplyr::group_by(sector) |>   dplyr::slice_max(date, n = 5) |>    dplyr::arrange(sector, date) |>    dplyr::mutate(yoy_pct_change = (value/dplyr::lag(value, 4) - 1)*100) |>    dplyr::slice_max(date) |>    knitr::kable() food |>    dplyr::ungroup() |>    dplyr::mutate(year = lubridate::year(date)) |>    dplyr::summarise(value = mean(value), .by = c(sector, year)) |>    dplyr::group_by(sector) |>    dplyr::mutate(yoy_pct_change = round((value/dplyr::lag(value) - 1)*100, 2)) |>    dplyr::group_by(year) |>    dplyr::mutate(pct_of_tot = round(value/sum(value) * 100, 2)) |>    dplyr::filter(year == 2022) #> # A tibble: 6 × 5 #> # Groups:   year [1] #>   sector         year value yoy_pct_change pct_of_tot #>   <fct>         <dbl> <dbl>          <dbl>      <dbl> #> 1 Catering       2022 1984            8.13      47.3  #> 2 Fishing        2022   10            2.56       0.24 #> 3 Manufacturing  2022  420.           1.45      10.0  #> 4 Retail         2022 1134.          -2.43      27.0  #> 5 Wholesale      2022  230.           3.36       5.49 #> 6 Agriculture    2022  418.           0.77       9.97"},{"path":"https://foodchainstats.github.io/fsp/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"First Last. Author, maintainer.","code":""},{"path":"https://foodchainstats.github.io/fsp/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Last F (2023). fsp: Utilities Food Statistics Pocketbook. R package version 0.0.0.9000, https://foodchainstats.github.io/fsp/.","code":"@Manual{,   title = {fsp: Utilities for the Food Statistics Pocketbook},   author = {First Last},   year = {2023},   note = {R package version 0.0.0.9000},   url = {https://foodchainstats.github.io/fsp/}, }"},{"path":"https://foodchainstats.github.io/fsp/index.html","id":"fsp","dir":"","previous_headings":"","what":"Utilities for the Food Statistics Pocketbook","title":"Utilities for the Food Statistics Pocketbook","text":"Experimental functions assist producing Food Statistics Pocketbook","code":""},{"path":"https://foodchainstats.github.io/fsp/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Utilities for the Food Statistics Pocketbook","text":"can install development version fsp GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"FoodchainStats/fsp\")"},{"path":"https://foodchainstats.github.io/fsp/index.html","id":"jobs03-workflow","dir":"","previous_headings":"","what":"JOBS03 workflow","title":"Utilities for the Food Statistics Pocketbook","text":"","code":"library(fsp)  j <- acquire_jobs03()  jobs03 <- get_jobs03_data(j)  knitr::kable(head(jobs03))"},{"path":"https://foodchainstats.github.io/fsp/index.html","id":"agricultural-workforce","dir":"","previous_headings":"","what":"Agricultural workforce","title":"Utilities for the Food Statistics Pocketbook","text":"","code":"library(fsp) w <- acquire_ag_workforce()  ag_workforce <- fsp::get_ag_workforce(w)  knitr::kable(head(ag_workforce))"},{"path":"https://foodchainstats.github.io/fsp/index.html","id":"process","dir":"","previous_headings":"","what":"Process","title":"Utilities for the Food Statistics Pocketbook","text":"","code":"lvls <- c(\"Agriculture\",           \"Fishing\",           \"Manufacturing\",           \"Wholesale\",           \"Retail\",           \"Catering\")  ag_gb <- fsp::compile_ag_workforce()  food <- fsp::jobs03_sectors() |>    dplyr::left_join(fsp::get_jobs03_data()) |>    dplyr::group_by(sector, date) |>    dplyr::summarise(value = sum(value)) |>    dplyr::bind_rows(ag_gb) |>    dplyr::mutate(sector = forcats::fct(sector, levels = lvls))    food |>    dplyr::filter(date >= \"2020-01-01\") |>    ggplot2::ggplot() +   ggplot2::geom_point(ggplot2::aes(x = date, y = value, colour = sector)) +   ggplot2::geom_line(ggplot2::aes(x = date, y = value, colour = sector)) food |>   dplyr::group_by(sector) |>   dplyr::slice_max(date) |>    knitr::kable()"},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_ag_workforce.html","id":null,"dir":"Reference","previous_headings":"","what":"Download Defra Agricultural Workforce dataset — acquire_ag_workforce","title":"Download Defra Agricultural Workforce dataset — acquire_ag_workforce","text":"Download Defra Agricultural Workforce dataset","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_ag_workforce.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download Defra Agricultural Workforce dataset — acquire_ag_workforce","text":"","code":"acquire_ag_workforce(path)"},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_ag_workforce.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download Defra Agricultural Workforce dataset — acquire_ag_workforce","text":"path Folder put downloaded data . missing tempfile created. specified downloaded file named 'ag_workforce.ods'.","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_ag_workforce.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download Defra Agricultural Workforce dataset — acquire_ag_workforce","text":"file path name downloaded file.","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_ag_workforce.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download Defra Agricultural Workforce dataset — acquire_ag_workforce","text":"","code":"if (FALSE) { jobs03 <- acquire_ag_workforce()  file <- acquire_ag_workforce(\"~/downloads\") }"},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_ct.html","id":null,"dir":"Reference","previous_headings":"","what":"Download ONS Consumer Trends dataset — acquire_ct","title":"Download ONS Consumer Trends dataset — acquire_ct","text":"Download ONS Consumer Trends dataset","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_ct.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download ONS Consumer Trends dataset — acquire_ct","text":"","code":"acquire_ct(path)"},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_ct.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download ONS Consumer Trends dataset — acquire_ct","text":"path Folder put downloaded data . missing tempfile created. specified downloaded file named 'ct.csv'.","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_ct.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download ONS Consumer Trends dataset — acquire_ct","text":"file path name downloaded file.","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_ct.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download ONS Consumer Trends dataset — acquire_ct","text":"","code":"if (FALSE) { jobs03 <- acquire_ct()  file <- acquire_ct(\"~/downloads\") }"},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_jobs03.html","id":null,"dir":"Reference","previous_headings":"","what":"Download ONS JOBS03 dataset — acquire_jobs03","title":"Download ONS JOBS03 dataset — acquire_jobs03","text":"Download ONS JOBS03 dataset","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_jobs03.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download ONS JOBS03 dataset — acquire_jobs03","text":"","code":"acquire_jobs03(path)"},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_jobs03.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download ONS JOBS03 dataset — acquire_jobs03","text":"path Folder put downloaded data . missing tempfile created. specified downloaded file named 'jobs03.xls'.","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_jobs03.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download ONS JOBS03 dataset — acquire_jobs03","text":"file path name downloaded file.","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/acquire_jobs03.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download ONS JOBS03 dataset — acquire_jobs03","text":"","code":"if (FALSE) { jobs03 <- acquire_jobs03()  file <- acquire_jobs03(\"~/downloads\") }"},{"path":"https://foodchainstats.github.io/fsp/reference/compile_ag_workforce.html","id":null,"dir":"Reference","previous_headings":"","what":"Compile GB Agricultural workforce data — compile_ag_workforce","title":"Compile GB Agricultural workforce data — compile_ag_workforce","text":"Compile GB Agricultural workforce data","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/compile_ag_workforce.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compile GB Agricultural workforce data — compile_ag_workforce","text":"","code":"compile_ag_workforce()"},{"path":"https://foodchainstats.github.io/fsp/reference/compile_ag_workforce.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compile GB Agricultural workforce data — compile_ag_workforce","text":"dataframe quarterly data","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/compile_ag_workforce.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compile GB Agricultural workforce data — compile_ag_workforce","text":"","code":"if (FALSE) { data <- compile_ag_workforce() }"},{"path":"https://foodchainstats.github.io/fsp/reference/fsp-package.html","id":null,"dir":"Reference","previous_headings":"","what":"fsp: Utilities for the Food Statistics Pocketbook — fsp-package","title":"fsp: Utilities for the Food Statistics Pocketbook — fsp-package","text":"package (one paragraph).","code":""},{"path":[]},{"path":"https://foodchainstats.github.io/fsp/reference/fsp-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"fsp: Utilities for the Food Statistics Pocketbook — fsp-package","text":"Maintainer: First Last first.last@example.com (ORCID)","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/get_ag_workforce.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract data from an Agricultural workforce ods file — get_ag_workforce","title":"Extract data from an Agricultural workforce ods file — get_ag_workforce","text":"Extract data Agricultural workforce ods file","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/get_ag_workforce.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract data from an Agricultural workforce ods file — get_ag_workforce","text":"","code":"get_ag_workforce(file)"},{"path":"https://foodchainstats.github.io/fsp/reference/get_ag_workforce.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract data from an Agricultural workforce ods file — get_ag_workforce","text":"file spreadsheet ods format. omitted, downloaded using acquire_ag_workforce().","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/get_ag_workforce.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract data from an Agricultural workforce ods file — get_ag_workforce","text":"tibble workforce data","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/get_ag_workforce.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract data from an Agricultural workforce ods file — get_ag_workforce","text":"","code":"if (FALSE) { # download and extract in one go ag <- get_ag_workforce()  # or download separately and extract  ag <- acquire_ag_workforce() data <- get_ag_workforce(ag)  }"},{"path":"https://foodchainstats.github.io/fsp/reference/get_jobs03_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract data from a JOBS03 xls file — get_jobs03_data","title":"Extract data from a JOBS03 xls file — get_jobs03_data","text":"Extract data JOBS03 xls file","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/get_jobs03_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract data from a JOBS03 xls file — get_jobs03_data","text":"","code":"get_jobs03_data(file, sheet = \"8. GB Totals\")"},{"path":"https://foodchainstats.github.io/fsp/reference/get_jobs03_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract data from a JOBS03 xls file — get_jobs03_data","text":"file JOBS03 xls file. omitted, file downloaded sheet Spreadsheet tab name number.","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/get_jobs03_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract data from a JOBS03 xls file — get_jobs03_data","text":"dataframe employment data","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/get_jobs03_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract data from a JOBS03 xls file — get_jobs03_data","text":"","code":"if (FALSE) { # dowload in one go data <- get_jobs03_data()  # or download first jobs <- acquire_jobs03() data <- get_jobs03_data(jobs) }"},{"path":"https://foodchainstats.github.io/fsp/reference/jobs03_sectors.html","id":null,"dir":"Reference","previous_headings":"","what":"Dataset of JOBS03 SIC codes and food chain sectors — jobs03_sectors","title":"Dataset of JOBS03 SIC codes and food chain sectors — jobs03_sectors","text":"Dataset JOBS03 SIC codes food chain sectors","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/jobs03_sectors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Dataset of JOBS03 SIC codes and food chain sectors — jobs03_sectors","text":"","code":"jobs03_sectors()"},{"path":"https://foodchainstats.github.io/fsp/reference/jobs03_sectors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Dataset of JOBS03 SIC codes and food chain sectors — jobs03_sectors","text":"tibble SIC codes sectors","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/jobs03_sectors.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Dataset of JOBS03 SIC codes and food chain sectors — jobs03_sectors","text":"","code":"jobs03_sectors() #> # A tibble: 12 × 2 #>    sector        sic_division #>    <chr>         <chr>        #>  1 Manufacturing 10.1-5       #>  2 Manufacturing 10.6-8       #>  3 Manufacturing 10.9         #>  4 Manufacturing 11-12        #>  5 Wholesale     46.30        #>  6 Wholesale     46.20        #>  7 Retail        47.20        #>  8 Retail        47.11        #>  9 Catering      56.10        #> 10 Catering      56.20        #> 11 Catering      56.30        #> 12 Fishing       03"},{"path":"https://foodchainstats.github.io/fsp/reference/url_ag_workforce.html","id":null,"dir":"Reference","previous_headings":"","what":"URL for Defra Agricultural Workforce data — url_ag_workforce","title":"URL for Defra Agricultural Workforce data — url_ag_workforce","text":"URL Defra Agricultural Workforce data","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/url_ag_workforce.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"URL for Defra Agricultural Workforce data — url_ag_workforce","text":"","code":"url_ag_workforce()"},{"path":"https://foodchainstats.github.io/fsp/reference/url_ag_workforce.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"URL for Defra Agricultural Workforce data — url_ag_workforce","text":"url landing page contains dataset. get_jobs03_data() uses function webscraping download extract thte actual data file.","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/url_ag_workforce.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"URL for Defra Agricultural Workforce data — url_ag_workforce","text":"","code":"url_ag_workforce() #> [1] \"https://www.gov.uk/government/statistical-data-sets/agricultural-workforce-in-the-united-kingdom-at-1-june\""},{"path":"https://foodchainstats.github.io/fsp/reference/url_ct.html","id":null,"dir":"Reference","previous_headings":"","what":"URL for the current Consumer Trends dataset — url_ct","title":"URL for the current Consumer Trends dataset — url_ct","text":"URL current Consumer Trends dataset","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/url_ct.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"URL for the current Consumer Trends dataset — url_ct","text":"","code":"url_ct()"},{"path":"https://foodchainstats.github.io/fsp/reference/url_ct.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"URL for the current Consumer Trends dataset — url_ct","text":"url dataset.","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/url_ct.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"URL for the current Consumer Trends dataset — url_ct","text":"","code":"url_ct() #> [1] \"https://www.ons.gov.uk/file?uri=/economy/nationalaccounts/satelliteaccounts/datasets/consumertrends/current/ct.csv\""},{"path":"https://foodchainstats.github.io/fsp/reference/url_jobs03.html","id":null,"dir":"Reference","previous_headings":"","what":"URL for the current JOBS03 dataset — url_jobs03","title":"URL for the current JOBS03 dataset — url_jobs03","text":"URL current JOBS03 dataset","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/url_jobs03.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"URL for the current JOBS03 dataset — url_jobs03","text":"","code":"url_jobs03()"},{"path":"https://foodchainstats.github.io/fsp/reference/url_jobs03.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"URL for the current JOBS03 dataset — url_jobs03","text":"url JOBS03.","code":""},{"path":"https://foodchainstats.github.io/fsp/reference/url_jobs03.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"URL for the current JOBS03 dataset — url_jobs03","text":"","code":"if (FALSE) { url_jobs03() }"}]
